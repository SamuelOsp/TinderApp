<ion-content [fullscreen]="true" class="discover">

  <div class="topbar">
    <ion-icon name="flame" aria-hidden="true"></ion-icon>
  </div>

  <div class="deck">
    <div
      class="card"
      #cardEl
      *ngFor="let p of profiles; let i = index; trackBy: trackById"
      [style.zIndex]="100 - i"
      [class.behind-1]="i === 1"
      [class.behind-2]="i === 2"
      [class.behind]="i > 0">

      <div class="tap tap-left"  (click)="prevPhoto(p)"></div>
      <div class="tap tap-right" (click)="nextPhoto(p)"></div>

      <img class="photo" [src]="getPhoto(p)" alt="" loading="lazy" />

      <div class="dots">
        <span *ngFor="let f of p.photos; let k = index" [class.on]="k <= (photoIndex[p.id] || 0)"></span>
      </div>

      <div class="badge like">LIKE</div>
      <div class="badge nope">NOPE</div>

      <div class="info">
        <div class="name-row">
          <span class="name">{{ p.name }}</span>
          <span class="age" *ngIf="p.age != null">{{ p.age }}</span>
        </div>
        <div class="meta" *ngIf="p.distanceKm != null">
          <ion-icon name="location-outline"></ion-icon>
          {{ p.distanceKm }} km away
        </div>
        <div class="bio" *ngIf="p.bio">{{ p.bio }}</div>
      </div>
    </div>
  </div>

  <div class="actions">
    <button class="btn btn-nope" (click)="passTop()" aria-label="Nope">
      <ion-icon name="close"></ion-icon>
    </button>
    <button class="btn btn-like" (click)="likeTop()" aria-label="Like">
      <ion-icon name="heart"></ion-icon>
    </button>
  </div>
</ion-content>
